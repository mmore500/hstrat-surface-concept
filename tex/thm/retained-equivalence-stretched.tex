\begin{lemma}[Stretched Algorithm Retained Ingest Times]
\label{thm:retained-equivalence-stretched}
If the first $n$ data items $\colorH(\colorTbar) = \colorh$ for each h.v. $\colorh$ are guaranteed retained, then we are guaranteed to have all
\begin{align*}
\colorTbar
&\in
\{
  j'2^{\colorh'} - 1
  :
  j' \in 1,2,\,\ldots,2n
  \text{ and }
  \colorh' \in \mathbb{N}
\}.
\end{align*}
\end{lemma}
\begin{proof}

Recall that the $j$th instance of hanoi value $\colorh$ appears at ingest time
\begin{align*}
\colorTbar
&= j2^{\colorh + 1} + 2^{\colorh} - 1,
\end{align*}
indexed from $j=0$.

The set of retained data items can be denoted
\begin{align*}
\mathfrak{R} =
\{
  j2^{\colorh + 1} + 2^{\colorh} - 1
  :
  j \in 0,1,\,\ldots,n-1
  \text{ and }
  \colorh \in \mathbb{N}
\}.
\end{align*}

We will show $\mathfrak{R}$ equivalent to,
\begin{align*}
\mathfrak{R}' =
\{
  j'2^{\colorh'} - 1
  :
  j' \in 1,2,\,\ldots,2n
  \text{ and }
  \colorh' \in \mathbb{N}
\}.
\end{align*}

\begin{proofpart}[$\mathfrak{R} \subseteq \mathfrak{R}`$]
Suppose $\colorTbar \in \mathfrak{R}$.
Then $\exists j,  0 \leq j < n$ and $\colorh \in \mathbb{N}$ such that
\begin{align*}
\colorTbar
&= j2^{\colorh + 1} + 2^{\colorh} - 1\\
&= (2j + 1)2^{\colorh} - 1.
\end{align*}
Note that $2j + 1 \in 1,2,\,\ldots,2n$, giving $\mathfrak{R} \subseteq \mathfrak{R}`$.
\end{proofpart}

\begin{proofpart}[$\mathfrak{R}' \subseteq \mathfrak{R}$]
Suppose $\colorTbar \in \mathfrak{R}'$.
Then $\exists j',  1 \leq j' \leq 2n$ and $\colorh \in \mathbb{N}$ such that
\begin{align*}
\colorTbar
&= j'2^{\colorh} - 1.
\end{align*}

In the case that $j' \bmod 2 = 1$,
\begin{align*}
\colorTbar
&= \frac{j'-1}{2} 2^{\colorh + 1} + 2^{\colorh} - 1.
\end{align*}
for $j' \in 1, 3, \,\ldots 2n-1$.
Because $\frac{j'-1}{2} \in 0, 1, \, \ldots, n - 1$ here, $\mathfrak{R}' \subseteq \mathfrak{R}$.

In the case that $j' \bmod 2 = 0$,
\begin{align*}
\colorTbar
&= j'2^{\colorh} - 1\\
&= \frac{j'}{2}2^{\colorh + 1} - 1.
\end{align*}

Recalling that $\colorH(j'/2 - 1) = \log_2 \max\{ i \in 2^{\mathbb{N}} : i \bmod j'/2 = 0 \}$,
\begin{align*}
\colorTbar
&= \frac{j'/2}{2^{\colorH(j'/2 - 1)}}2^{\colorh'} - 1\\
&= \Big(\frac{j'/2}{2^{\colorH(j'/2 - 1)}} - 1\Big) 2^{\colorh'} + 2^{\colorh'} - 1\\
&= \Big(\frac{(j'/2)/(2^{\colorH(j'/2 - 1)}) - 1}{2}\Big) 2^{\colorh' + 1} + 2^{\colorh'} - 1
\end{align*}
for $j' \in 2, 4, \,\ldots 2n$.
Because $j'/2 \in 1, 2, \, \ldots, n$,
\begin{align*}
\Big(\frac{(j'/2)/(2^{\colorH(j'/2 - 1)}) - 1}{2}\Big)
\in 0,1, \, \ldots, (x \leq \frac{n - 1}{2}).
\end{align*}
Thus, $\mathfrak{R}' \subseteq \mathfrak{R}$ here, too.
\end{proofpart}
\end{proof}
