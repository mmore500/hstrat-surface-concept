\begin{lemma}[Minimum Recent Items Retained per Hanoi Value]
\label{thm:tilted-most-recent-retained}
At least the most recent $\left\lceil2^{\colors - 1 - \colortau}\right\rceil$ encountered instances of every h.v. $\colorh$ are retained.
Concretely,
\begin{align*}
\textsf{goal\_tilted} \subset \colorB_{\colorT}
\end{align*}
\end{lemma}
\begin{proof}
From Lemma \ref{thm:stretched-discarded-incidence-count} we have reservations available to store at least the first $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$ instances of each hanoi value.
So, we can restrict our consideration to where h.v. instance count exceeds $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$.

In the absence of invasion, data item placement (by design) cycles around the sites reserved to a hanoi value.
With at least $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$ sites reserved, at least the last $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$ instances of each h.v. are retained.

What about in the case of invasion?
In this case, again from Lemma \ref{thm:stretched-discarded-incidence-count}, we have the number of reserved sites as dropping from $\left\lceil 2^{\colors - \colortau} \right\rceil$ to $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$.
Recall from Lemma \ref{thm:tilted-last-touched} each epoch, the final encountered instance of each h.v. is placed into the rightmost reservation segment.
By design, we therefore know that the final $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$ instances of a h.v. encountered during an epoch are laid out left-to-right in each of the smallest-size remaining segments, $r = \colortau$ --- with the last in rightmost reservation segment.

So, at the outset of epoch $\colort$, reassigned sites $\{\colork \in \colorS : \colorHcal_{\colort - 1}(\colork) \neq \colorHcal_{\colort}(\colork)\}$ always contain the most recent $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$ instances of h.v. $\colorh = \colorHcal_{\colort - 1}(\colork)$, arranged left to right.
If data items in these reassigned sites were lost instantaneously at time $\min\{\colorT \in \colort\}$, we would not meet our proof objectives.
At that point, we would none of the most-recent $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$ h.v. $\colorh$ data items retained.
However, data items are not lost instantaneously when a site is reassigned.
Instead, data items in reassigned sites $\colork$ linger until they are \textit{actually} overwritten by incoming data items $\colorT \in \colort$ with $\colorK(\colorT) = \colork$.

From Lemma \ref{thm:tilted-invading-overwrite-order}, we have that, over the course of an epoch, invaded data items are overwritten left to right --- except the leftmost reservation, which is overwritten last.
To ensure that the most recent $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$ data items are stored, we therefore must show demonstrate two desiderata:
\begin{enumerate}
\item at least two depositions of invaded h.v. $\colorh$ occur before the first invasion overwrite, and
\item the cadence of overwrites proceeds slower than that of new instances of invaded hanoi value $\colorh$.
\end{enumerate}


\begin{mybox}
\textbf{Intuition.}
Imagine the sequence of the $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$ most instances of h.v. $\colorh$ as the protagonist of classic video game ``snake'' \citep{de2016complexity}.
In that game, the titular snake grows at its head and shrinks at its tail.
Analogously, our sequence of most recent data items adds new items at the front and has tail items overwritten.
When an invasion occurs and half of ring buffer reservations are lost, the snake's head has just arrived to the final site of the lost half of the ring buffer and its body of $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$ sites will be stretched out across the lost half of the ring buffer.
From that point, our snake containing $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$ items be chased into the kept half of the ring buffer as overwrites enchroach at its rear.
The two desiderata described above ensure that the snake (1) pulls ahead and (2) stays far enough ahead of invading overwrites to keep at least the snake's leading $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$ body segments intact.
Mixing metaphors, the snake slithers head then tail to safety (in the kept $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$ ring buffer sites) as the rickety bridge of reassigned but not-yet-overwritten sites it had been occupying collapses behind it.
After escaping, the snake happily crawls in circles around its $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$ reserved sites --- at least, until invaded again.
\end{mybox}

\begin{proofpart}[Before First Overwrite]
Let $\colorT' = \min\{\colorT \in \colort + 1\}$.
Because $\colorT' \in 2^{\mathbb{N}} \forall \colort$, we have $\colorH(\colorT') = 0$ and, by the fractal property of the hanoi sequence,
\begin{align*}
\colorH(\colorT'), \colorH(\colorT'+1), \,\ldots, \colorH(2\colorT' - 1) = \colorH(0), \colorH(1), \,\ldots, \colorH(\colorT' - 1).
\end{align*}
Note that $2\colorT' - 1 = \max\{\colorT \in \colort + 1\}$.

By Lemma \ref{thm:tilted-invader-minus-invaded} for h.v. $\colorHcal_{\colort}(\colork)$ invaded by h.v. $\colorHcal_{\colort + 1}(\colork)$ ($\colorHcal_{\colort}(\colork) \neq \colorHcal_{\colort + 1}(\colork)$), we have $\colorHcal_{\colort + 1}(\colork) \geq \colorHcal_{\colort}(\colork) + 2$.
Recalling that the first instance of h.v. $\colorh$ occurs at ingest time $\colorT = 2^{\colorh} - 1$, note that $\forall\colorh$,
\begin{align*}
|\{\colorT \in 0,\,\ldots, 3 \times 2^{\colorh} : \colorH(\colorT) = \colorh\}| = 2.
\end{align*}
\end{proofpart}
Because $\colorT = 3 \times 2^{\colorh} < 2^{\colorh + 2} - 1$, we have our result.

\begin{proofpart}[Overwrite Cadence]
The cadence of h.v. $\colorh$, after its first incidence at ingest time $\colorT=2^{\colorh} - 1$ is to occur every $2^{\colorh + 1}$ data items, where $\colorT \bmod 2^{\colorh + 1} = 2^{\colorh} - 1$.
Observe also that the cadence at which a h.v. $\geq\colorh$ occurs is every $2^{\colorh}$ items, where $\colorT \bmod 2^{\colorh} = 2^{\colorh} - 1$.

Again, by Lemma \ref{thm:tilted-invader-minus-invaded} for h.v. $\colorHcal_{\colort}(\colork)$ invaded by h.v. $\colorHcal_{\colort + 1}(\colork)$ ($\colorHcal_{\colort}(\colork) \neq \colorHcal_{\colort + 1}(\colork)$), we have $\colorHcal_{\colort + 1}(\colork) \geq \colorHcal_{\colort}(\colork) + 2$.
New incidences of invaded h.v. $\colorHcal_{\colort}(\colork)$ accrue faster than the final $\left\lceil 2^{\colors - 1 - \colortau} \right\rceil$ instances of h.v. $\colorh$ from epoch $\colort$ are overwritten because
\begin{align*}
2^{\colorh + 1} \stackrel{\checkmark}{<} 2^{\colorh + 2}.
\end{align*}
\end{proofpart}

\end{proof}
